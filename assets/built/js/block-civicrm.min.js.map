{"version":3,"file":"blocks-for-civicrm/assets/built/js/block-civicrm.min.js","mappings":"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","sources":["webpack://bfc.[name]/external this {\"this\":[\"wp\",\"blocks\"]}","webpack://bfc.[name]/external this {\"this\":[\"wp\",\"components\"]}","webpack://bfc.[name]/external this {\"this\":[\"wp\",\"editor\"]}","webpack://bfc.[name]/external this {\"this\":[\"wp\",\"element\"]}","webpack://bfc.[name]/webpack/bootstrap","webpack://bfc.[name]/webpack/runtime/compat get default export","webpack://bfc.[name]/webpack/runtime/define property getters","webpack://bfc.[name]/webpack/runtime/hasOwnProperty shorthand","webpack://bfc.[name]/webpack/runtime/make namespace object","webpack://bfc.[name]/./src/javascript/block-civicrm.jsx"],"sourcesContent":["module.exports = (function() { return this[\"wp\"][\"blocks\"]; }());","module.exports = (function() { return this[\"wp\"][\"components\"]; }());","module.exports = (function() { return this[\"wp\"][\"editor\"]; }());","module.exports = (function() { return this[\"wp\"][\"element\"]; }());","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {\n    registerBlockType,\n} from \"@wordpress/blocks\";\n\nimport {\n    Fragment,\n    RawHTML\n} from \"@wordpress/element\";\n\nimport {\n    MediaUpload ,\n    AlignmentToolbar,\n    InspectorControls,\n    InnerBlocks,\n    PanelColorSettings,\n    BlockAlignmentToolbar,\n    RichText\n} from \"@wordpress/editor\";\n\nimport {\n    PanelBody ,\n    TextControl,\n    Button,\n    SelectControl,\n    RangeControl,\n    ToggleControl,\n    ServerSideRender\n} from \"@wordpress/components\";\n\nvar withSelect = wp.data.withSelect;\n\nvar components_options = [];\nfor(var component_id in block_civicrm.components){\n    components_options.push({\n        label: block_civicrm.components[component_id].label,\n        value: component_id\n    });\n}\n\nvar block_attributes = {\n    component: {\n        type: 'string',\n    },\n    id: {\n        type: 'string',\n    },\n    gid: {\n        type: 'string',\n    },\n    cid: {\n        type: 'string',\n    },\n};\nfor(var co in block_civicrm.options){\n    var default_value = null;\n    for(var o in block_civicrm.options[co].options){\n        if(default_value === null){\n            default_value = o;\n            break;\n        }\n    }\n    block_attributes[block_civicrm.options[co].key] = {\n        type: 'string',\n        default: default_value,\n    };\n}\n\n\nregisterBlockType(\"blocks-for-civicrm/civicrm\", {\n    title: block_civicrm.i18n.title,\n    description: block_civicrm.i18n.description,\n    icon: \"screenoptions\",\n    category: \"widgets\",\n    attributes: block_attributes,\n\n    edit({className, attributes, setAttributes, isSelected}){\n        const{\n            component,\n            id,\n            gid,\n            cid,\n        } = attributes;\n\n        const setComponent = component => setAttributes({component});\n\n        // Generate setters for ID fields\n        const setId = {\n            'id': id => setAttributes({id}),\n            'gid': gid => setAttributes({gid}),\n            'cid': cid => setAttributes({cid}),\n        }\n        var idControl = null;\n        if(typeof(block_civicrm.id_options[component]) !== 'undefined'){\n            var idSelect = block_civicrm.components[component].select;\n            idControl = (\n                <TextControl\n                label={idSelect.key}\n                name={idSelect.key}\n                onChange={setId[idSelect.key]}\n                value={attributes[idSelect.key]}\n                />\n            );\n            if(block_civicrm.id_options[component].length){\n                idControl = (\n                    <SelectControl\n                        label={block_civicrm['i18n']['options'][idSelect.key]}\n                        name={idSelect.key}\n                        onChange={setId[idSelect.key]}\n                        value={attributes[idSelect.key]}\n                        options={block_civicrm.id_options[component]}\n                    />\n                );\n            }\n        }\n\n        function getControl(item, value){\n            var control_options = [];\n            for(var o in item.options){\n                control_options.push({\n                    label: item.options[o],\n                    value: o,\n                })\n            }\n\n            return (<SelectControl\n                label={block_civicrm['i18n']['options'][item.key]}\n                name={item.key}\n                onChange={setOptions[item.key]}\n                value={value}\n                options={control_options}\n                />);\n        }\n\n        // Generate setters from options\n        var setOptions = [];\n        var options = [];\n        for(var co in block_civicrm.options){\n            eval('setOptions[\"'+block_civicrm.options[co].key+'\"] = '+block_civicrm.options[co].key+' => setAttributes({'+block_civicrm.options[co].key+'})');\n            if(block_civicrm.options[co].components === true || block_civicrm.options[co].components.indexOf(component)>-1){\n                options.push(getControl(block_civicrm.options[co], attributes[block_civicrm.options[co].key]));\n            }\n        }\n\n        // Generate  shortcode preview\n        var attrs = \"\";\n        for(var attr in attributes){\n            attrs+=' '+attr+'=\"'+attributes[attr]+'\"';\n        }\n\n        return (\n            <Fragment>\n                <div class=\"blocks-for-civicrm-preview\">\n                    <SelectControl\n                        label={block_civicrm.i18n.component}\n                        name=\"component\"\n                        onChange={setComponent}\n                        value={component}\n                        options={components_options}\n                    />\n\n                    {idControl}\n                    {options}\n\n                </div>\n\n                {isSelected && (\n\n                    <InspectorControls>\n                        <code>[civicrm {attrs}]</code>\n                    </InspectorControls>\n\n                )}\n            </Fragment>\n        )\n    },\n\n    save: function save(props) {\n        const { attributes, innerBlocks } = props;\n        var attrs = \"\";\n        for(var attr in attributes){\n            attrs+=' '+attr+'=\"'+attributes[attr]+'\"';\n        }\n        return (\n            <RawHTML>{'[civicrm'+attrs+']'}</RawHTML>\n        );\n    }\n});\n"],"names":["module","exports","this","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","withSelect","wp","data","components_options","component_id","block_civicrm","components","push","label","block_attributes","component","type","id","gid","cid","co","options","default_value","default","registerBlockType","title","i18n","description","icon","category","attributes","edit","className","setAttributes","isSelected","setComponent","setId","idControl","id_options","idSelect","select","TextControl","name","onChange","length","SelectControl","getControl","item","control_options","setOptions","eval","indexOf","attrs","attr","Fragment","class","InspectorControls","save","props","innerBlocks","RawHTML"],"sourceRoot":""}